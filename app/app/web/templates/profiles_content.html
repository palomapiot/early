
{% load i18n %}
<script type="text/javascript">
    $(document).ready(function(){
        $('[data-toggle="popover"]').popover();   
    });
</script>
<div id="profiles-content" class="row">
    <h1 class="col-12 mb-4">{% trans 'Profiles' %}</h1>
    {% for profile in results %}
    <div class="col-lg-3 col-md-6 col-xs-12">
        <div class="card shadow mb-3">
            <h5 class="tooltip-div card-header text-center soft-blue"><strong>{{ profile.experiment_id }}</strong>
                {% if profile.is_valid %}
                <a href="#" data-toggle="popover"
                    title="Valid profile"
                    data-trigger="hover" 
                    data-content="Data validated by {{ profile.validated_by.username }}">
                    <em class="fas fa-check-circle green"></em>
                </a>
                {% endif %}
            </h5>
            <a href="{% url 'profile-detail' profile.id %}" class="profile-link">
                {% include "profile_fields.html" with profile=profile detail="false" %}
                <div class="p-2 text-muted text-center">
                    {% if profile.data.depressed %}
                    <span class="badge badge-pill badge-danger">{% trans 'Depression' %}</span> 
                    {% else %}
                    <span class="badge badge-pill badge-primary">{% trans 'No depression' %}</span> 
                    {% endif %}
                </div>
            </a>
        </div>
    </div>
    {% endfor %}
</div>
{% if next is not None or previous is not None %}
<div class="row d-flex justify-content-center">
    <ul class="pagination">
        <li class="page-item {% if previous is None %} disabled{% endif %}">
            <a class="page-link" href="{% url 'profiles' %}?page={{previous}}">&laquo;</a>
        </li>
        {% for page in pages %}
        <li class="page-item {% if page.active %} active{% endif %}{% if page.page == '...' %} disabled{% endif %}">
            <a class="page-link" href="{% url 'profiles' %}?page={{page.page}}">{{page.page}}</a>
        </li>
        {% endfor %}
        <li class="page-item {% if next is None %} disabled{% endif %}">
            <a class="page-link" href="{% url 'profiles' %}?page={{next}}">&raquo;</a>
        </li>
    </ul>
</div>
{% endif %}